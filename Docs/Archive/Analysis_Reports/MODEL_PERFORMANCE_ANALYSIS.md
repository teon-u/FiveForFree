# Model Performance Analysis

실제 투자에 활용 가능한 모델 성능 분석 결과입니다.

---

## 핵심 지표 정의

### 1. Precision (정밀도)
- **정의**: 모델이 "상승"을 예측했을 때 실제로 상승한 비율
- **계산**: TP / (TP + FP)
- **중요성**: 3:1 Risk/Reward 전략에서 **30% 이상**이면 수익 가능

### 2. Signal Rate (신호 빈도)
- **정의**: 전체 거래 기회 중 모델이 "매수" 신호를 보내는 비율
- **계산**: 예측 횟수 / 총 기회
- **중요성**: 지속적인 투자를 위해 충분한 거래 기회 필요

### 3. 실용성 평가 기준
| 조건 | 기준값 | 설명 |
|------|--------|------|
| Precision | ≥ 30% | 3:1 R/R 전략의 손익분기점 |
| Signal Rate | ≥ 10% | 월간 충분한 거래 기회 보장 |

---

## 모델별 성능 비교 (2024-12-18 기준)

### 전체 모델 평균 성능

| 모델 | Precision | Recall | F1 | AUC |
|------|-----------|--------|-----|-----|
| **LSTM** | **51.2%** | 35.9% | 0.382 | 0.777 |
| LightGBM | 30.4% | 20.9% | 0.171 | 0.622 |
| Ensemble | 28.7% | 17.2% | 0.153 | 0.654 |
| Transformer | 28.3% | 37.7% | 0.318 | 0.739 |
| XGBoost | 28.1% | 21.4% | 0.191 | 0.624 |

**결론**: LSTM이 가장 높은 평균 Precision을 보임

---

## 실용적인 투자 조합

### Signal Rate를 고려한 수익성 분석

| 순위 | 종목 | 모델 | Precision | Signal Rate | 예측횟수 | 총기회 | 평가 |
|------|------|------|-----------|-------------|----------|--------|------|
| 1 | BIIB | LSTM | 100.0% | 1.8% | 6 | 327 | ⚠️ 신호 부족 |
| 2 | **COIN** | **LSTM** | **92.7%** | **18.7%** | 55 | 294 | ✅ 최적 |
| 3 | **COIN** | **Transformer** | **86.4%** | **20.1%** | 59 | 294 | ✅ 최적 |
| 4 | HOOD | LightGBM | 66.7% | 1.7% | 6 | 353 | ⚠️ 신호 부족 |
| 5 | HOOD | XGBoost | 64.7% | 4.8% | 17 | 353 | ⚠️ 신호 부족 |
| 6 | **HOOD** | **LSTM** | **63.4%** | **27.9%** | 82 | 294 | ✅ 실용적 |
| 7 | HOOD | Ensemble | 62.5% | 2.3% | 8 | 353 | ⚠️ 신호 부족 |
| 8 | **HOOD** | **Transformer** | **55.2%** | **45.6%** | 134 | 294 | ✅ 실용적 |
| 9 | COIN | LightGBM | 53.3% | 8.5% | 30 | 353 | ⚠️ 경계선 |
| 10 | COIN | XGBoost | 41.7% | 10.2% | 36 | 353 | ✅ 실용적 |

### 추천 조합 (Precision ≥ 30% AND Signal Rate ≥ 10%)

| 종목 | 모델 | Precision | Signal Rate | 월간 예상 거래 |
|------|------|-----------|-------------|----------------|
| **COIN** | **LSTM** | 92.7% | 18.7% | ~55회 |
| **COIN** | **Transformer** | 86.4% | 20.1% | ~59회 |
| **HOOD** | **LSTM** | 63.4% | 27.9% | ~82회 |
| **HOOD** | **Transformer** | 55.2% | 45.6% | ~134회 |
| COIN | XGBoost | 41.7% | 10.2% | ~36회 |

---

## Signal Rate 해석 가이드

### 범위별 해석

| Signal Rate | 해석 | 투자 적합성 |
|-------------|------|-------------|
| < 5% | 매우 드문 신호 | ❌ 실용성 부족 |
| 5-10% | 적은 신호 | ⚠️ 주의 필요 |
| **10-30%** | **적절한 신호** | ✅ **이상적** |
| 30-50% | 빈번한 신호 | ✅ 활용 가능 |
| > 50% | 과다 신호 | ⚠️ 선별력 부족 |

### 왜 Signal Rate가 중요한가?

1. **BIIB LSTM 예시**
   - Precision 100% (완벽한 정확도!)
   - 하지만 Signal Rate 1.8% (327번 중 6번만 예측)
   - **결론**: 한 달에 6번의 거래 기회로는 지속적인 수익 창출 어려움

2. **COIN LSTM 예시**
   - Precision 92.7% (매우 높은 정확도)
   - Signal Rate 18.7% (294번 중 55번 예측)
   - **결론**: 높은 정확도 + 충분한 거래 기회 = 이상적인 조합

---

## 앙상블 vs 개별 모델

### 앙상블 성능 비교

| 종목 | 앙상블 Precision | 최고 개별 모델 | 개별 Precision | 승자 |
|------|------------------|----------------|----------------|------|
| BIIB | 7.7% | LSTM | 100.0% | LSTM |
| COIN | 40.0% | LSTM | 92.7% | LSTM |
| HOOD | 62.5% | LightGBM | 66.7% | LightGBM |
| NVDA | 33.3% | XGBoost | 28.6% | Ensemble |
| AAPL | 0.0% | - | 0.0% | 동률 |

**결론**: 앙상블이 개별 모델을 능가하는 경우는 5개 중 1개 (NVDA)

### 앙상블의 한계

1. **신호 희석**: 강한 모델의 신호가 약한 모델에 의해 평균화됨
2. **보수적 예측**: 확률 평균화로 인해 Signal Rate가 낮아짐
3. **LSTM 단독 사용 권장**: 특히 COIN, HOOD에서 LSTM 단독이 더 효과적

---

## 종목별 추천 전략

### COIN (Coinbase)
- **추천 모델**: LSTM 또는 Transformer
- **예상 수익률**: 높음 (Precision 86-92%)
- **거래 빈도**: 중간 (Signal Rate 18-20%)
- **전략**: 신호 발생 시 적극 매매

### HOOD (Robinhood)
- **추천 모델**: LSTM 또는 Transformer
- **예상 수익률**: 중상 (Precision 55-63%)
- **거래 빈도**: 높음 (Signal Rate 27-45%)
- **전략**: 빈번한 거래로 수익 누적

### NVDA (NVIDIA)
- **추천 모델**: Ensemble
- **예상 수익률**: 중간 (Precision 33%)
- **거래 빈도**: 낮음 (Signal Rate ~1.7%)
- **전략**: 신호 발생 시에만 선택적 매매

### BIIB, AAPL
- **현재 상태**: 실용적인 모델 조합 없음
- **권장**: 추가 데이터 축적 후 재평가

---

## UI 표시 권장 지표

### 필수 표시 지표
1. **Precision**: 모델 정확도
2. **Signal Rate**: 거래 기회 빈도
3. **실용성 등급**: Precision과 Signal Rate 기반 종합 평가

### 등급 시스템
| 등급 | 조건 | 색상 |
|------|------|------|
| A (최적) | Precision ≥ 50% AND Signal Rate ≥ 10% | 🟢 녹색 |
| B (양호) | Precision ≥ 30% AND Signal Rate ≥ 10% | 🔵 파란색 |
| C (주의) | Precision ≥ 30% AND Signal Rate < 10% | 🟡 노란색 |
| D (부적합) | Precision < 30% | 🔴 빨간색 |

---

## 기술적 구현 사항

### Feature Scaling (2024-12-18 적용)
- LSTM/Transformer에 `StandardScaler` 추가
- 입력 피처의 극단적 범위(최대 1900만)로 인한 NaN 가중치 문제 해결
- 스케일러는 모델과 함께 저장/로드 (`.scaler` 파일)

### BCEWithLogitsLoss (2024-12-18 적용)
- 기존 BCELoss → BCEWithLogitsLoss 변경
- 수치적 안정성 향상
- Sigmoid를 loss 함수 내부에서 처리

---

**Last Updated**: 2024-12-18
**Version**: 1.0
