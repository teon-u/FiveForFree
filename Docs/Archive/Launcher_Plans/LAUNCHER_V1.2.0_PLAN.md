# 런처 v1.2.0 기획안

**작성자:** 분석팀장
**작성일:** 2025-12-26
**상태:** 기획 완료

---

## 1. 개요

### 1.1 목적
런처 v1.2.0에서 수집된 데이터 확인 기능과 티커 목록 확인 기능을 추가하여 사용자가 시스템 상태를 GUI에서 바로 확인할 수 있도록 함.

### 1.2 요청 기능
1. **수집된 데이터 확인 기능** - 데이터베이스 상태, 수집된 바 데이터 통계
2. **티커 목록 확인 기능** - 등록된 티커 목록, 모델 상태, 활성 여부

---

## 2. 기능 상세 기획

### 2.1 수집된 데이터 확인 기능

#### 2.1.1 UI 위치
- 빠른 작업 섹션에 "데이터 확인" 버튼 추가
- 클릭 시 팝업 다이얼로그 표시

#### 2.1.2 표시 정보
```
[데이터 상태]
- 등록된 티커 수: XX개
- 수집된 분봉 데이터: XX,XXX개
- 데이터 기간: YYYY-MM-DD ~ YYYY-MM-DD (XX일)
- 티커별 평균 바 수: XX,XXX개

[모델 상태]
- 학습된 모델 수: XX개
- 모델 보유 티커: XX개
- 데이터만 있는 티커: XX개
- 모델만 있는 티커: XX개

[Top 10 티커 (바 데이터 기준)]
1. AAPL: XX,XXX bars
2. MSFT: XX,XXX bars
...
```

#### 2.1.3 구현 방식
- `scripts/check_data.py` 로직을 런처에 통합
- 별도 쓰레드에서 데이터 조회 (UI 블로킹 방지)
- Toplevel 다이얼로그로 표시

#### 2.1.4 단축키
- `Ctrl+I` (Information)

---

### 2.2 티커 목록 확인 기능

#### 2.2.1 UI 위치
- 빠른 작업 섹션에 "티커 목록" 버튼 추가
- 클릭 시 새 창(Toplevel) 표시

#### 2.2.2 표시 정보
```
[티커 목록] (테이블 형식)
| 심볼   | 이름          | 현재가    | 24h변동 | 모델 | 활성 |
|--------|---------------|-----------|---------|------|------|
| AAPL   | Apple Inc.    | $185.50   | +1.2%   | O    | O    |
| MSFT   | Microsoft     | $376.20   | -0.5%   | O    | O    |
| GOOGL  | Alphabet      | $141.80   | +0.8%   | X    | O    |
...
```

#### 2.2.3 기능
- 티커 검색 (심볼/이름)
- 필터링: 활성만 / 모델 있는 것만 / 전체
- 정렬: 심볼 / 변동률 / 거래량
- 새로고침 버튼
- 더블클릭 시 상세 정보 표시

#### 2.2.4 구현 방식
- API `/api/tickers` 엔드포인트 활용
- 또는 직접 DB 조회 (API 서버 미실행 시)
- Treeview 위젯 사용

#### 2.2.5 단축키
- `Ctrl+T` (Tickers)

---

## 3. 기술 명세

### 3.1 신규 클래스/함수

```python
class DataStatusDialog(tk.Toplevel):
    """데이터 상태 확인 다이얼로그"""
    def __init__(self, parent):
        # DB 연결 및 통계 조회
        # 결과 표시
        pass

class TickerListWindow(tk.Toplevel):
    """티커 목록 창"""
    def __init__(self, parent):
        # 검색바
        # 필터 콤보박스
        # Treeview 테이블
        # 새로고침 버튼
        pass

    def load_tickers(self):
        """티커 목록 로드"""
        pass

    def filter_tickers(self):
        """필터링 적용"""
        pass
```

### 3.2 필요 임포트
```python
from src.utils.database import get_db, MinuteBar, Ticker
from src.models.model_manager import ModelManager
from sqlalchemy import select, func
```

### 3.3 버튼 추가 위치 (launcher.py)

`_create_process_controls()` 메서드의 빠른 작업 섹션에 추가:

```python
# 기존 버튼들 뒤에 추가
data_btn = ttk.Button(
    quick_frame, text="데이터 확인", width=10,
    command=self._show_data_status
)
data_btn.pack(side=tk.LEFT, padx=2)
Tooltip(data_btn, "수집된 데이터 상태 확인 (Ctrl+I)")

ticker_btn = ttk.Button(
    quick_frame, text="티커 목록", width=10,
    command=self._show_ticker_list
)
ticker_btn.pack(side=tk.LEFT, padx=2)
Tooltip(ticker_btn, "등록된 티커 목록 보기 (Ctrl+T)")
```

---

## 4. UI 목업

### 4.1 데이터 상태 다이얼로그
```
+------------------------------------------+
|  데이터 상태                          [X] |
+------------------------------------------+
|                                          |
|  [데이터베이스]                          |
|  등록 티커: 50개                          |
|  분봉 데이터: 1,234,567개                 |
|  데이터 기간: 2024-10-01 ~ 2025-12-26     |
|                                          |
|  [모델]                                  |
|  학습된 모델: 45개                        |
|  준비 완료 티커: 45개                     |
|                                          |
|  [Top 5 티커]                            |
|  1. AAPL: 52,340 bars                    |
|  2. MSFT: 51,890 bars                    |
|  3. GOOGL: 50,210 bars                   |
|  4. AMZN: 49,870 bars                    |
|  5. NVDA: 48,560 bars                    |
|                                          |
|           [ 새로고침 ]  [ 닫기 ]         |
+------------------------------------------+
```

### 4.2 티커 목록 창
```
+----------------------------------------------------------+
|  티커 목록                                            [X] |
+----------------------------------------------------------+
| 검색: [___________]  필터: [활성 티커만 v]  [ 새로고침 ] |
+----------------------------------------------------------+
| 심볼  | 이름            | 현재가   | 변동   | 모델 | 상태 |
|-------|-----------------|----------|--------|------|------|
| AAPL  | Apple Inc.      | $185.50  | +1.2%  |  O   |  활성 |
| MSFT  | Microsoft Corp. | $376.20  | -0.5%  |  O   |  활성 |
| GOOGL | Alphabet Inc.   | $141.80  | +0.8%  |  X   |  활성 |
| AMZN  | Amazon.com Inc. | $178.30  | +2.1%  |  O   |  활성 |
| NVDA  | NVIDIA Corp.    | $495.60  | +3.5%  |  O   |  활성 |
| META  | Meta Platforms  | $356.40  | +0.3%  |  O   |  활성 |
| ...   | ...             | ...      | ...    | ...  | ...  |
+----------------------------------------------------------+
| 표시: 50/50 티커                                          |
+----------------------------------------------------------+
```

---

## 5. 작업 항목

### Phase 1: 데이터 확인 기능
1. DataStatusDialog 클래스 구현
2. DB 통계 조회 함수 작성
3. 버튼 및 단축키 추가
4. 테스트

### Phase 2: 티커 목록 기능
1. TickerListWindow 클래스 구현
2. Treeview 테이블 구성
3. 검색/필터 기능 구현
4. 버튼 및 단축키 추가
5. 테스트

---

## 6. 예상 코드 변경량

- launcher.py: +200~250줄 (현재 763줄 → 약 1,000줄)
- 신규 import 추가
- 2개 Toplevel 클래스 추가
- 2개 메서드 추가 (_show_data_status, _show_ticker_list)
- 2개 단축키 추가 (Ctrl+I, Ctrl+T)

---

## 7. 완료 조건

- [ ] 데이터 확인 버튼 클릭 시 통계 표시
- [ ] 티커 목록 버튼 클릭 시 테이블 표시
- [ ] 검색/필터 기능 동작
- [ ] 단축키 동작 (Ctrl+I, Ctrl+T)
- [ ] API 서버 없이도 동작 (직접 DB 조회)
- [ ] 에러 처리 (DB 연결 실패 등)

---

**기획 완료. 개발팀장에게 전달 요청.**
