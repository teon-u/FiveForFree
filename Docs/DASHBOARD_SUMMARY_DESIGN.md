# 대시보드 요약 정보 기획서

**작성일**: 2025-12-21
**작성자**: 분석팀장
**버전**: v1.0

---

## 1. 개요

### 1.1 목적

사용자가 대시보드에 접속했을 때 **한눈에 시장 상황과 주요 기회를 파악**할 수 있는 "오늘의 요약" 패널 설계

### 1.2 현재 상태

- 티커 그리드만 표시, 전체적인 요약 정보 부재
- 사용자가 직접 스크롤하며 기회를 찾아야 함
- 시장 상태(개장/폐장) 정보가 눈에 띄지 않음

---

## 2. 요약 패널 설계

### 2.1 위치 및 레이아웃

```
┌─────────────────────────────────────────────────────────────────────┐
│                         FiveForFree                                  │
├─────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │                    📊 오늘의 요약 패널                           │ │
│ │  (이 섹션이 새로 추가됨)                                        │ │
│ └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │                    필터 바                                       │ │
│ └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│                       티커 그리드                                   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 요약 패널 구성 요소

```
┌─────────────────────────────────────────────────────────────────────┐
│ 📊 오늘의 요약                                        2025-12-21   │
├───────────────┬───────────────┬───────────────┬─────────────────────┤
│ 🟢 시장 상태  │ 📈 상승 신호  │ 📉 하락 신호  │ ⭐ Top 기회        │
│               │               │               │                     │
│ ● 장중       │  23개         │  12개         │  NVDA +82%         │
│ 16:00 마감   │  (32% 비중)   │  (17% 비중)   │  TSLA +78%         │
│ 잔여 2시간   │               │               │  AAPL +75%         │
├───────────────┴───────────────┴───────────────┴─────────────────────┤
│ 💡 AI 인사이트: 오늘 기술주에서 강한 상승 신호가 감지되었습니다.    │
│    특히 반도체 섹터가 활발합니다.                                   │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 3. 세부 컴포넌트 설계

### 3.1 시장 상태 카드

```jsx
// MarketStatusCard.jsx

┌─────────────────────┐
│ 🟢 시장 상태        │
│                     │
│ ● 장중 (정규거래)   │
│ ─────────────────── │
│ 개장: 09:30 AM      │
│ 마감: 04:00 PM      │
│ 잔여: 2시간 15분    │
│                     │
│ ████████████░░░░    │
│        75% 경과     │
└─────────────────────┘
```

**상태 유형:**

| 상태 | 아이콘 | 색상 | 설명 |
|------|--------|------|------|
| 장중 | 🟢 | 초록 | 정규거래시간 중 |
| 프리마켓 | 🟡 | 노랑 | 04:00-09:30 AM |
| 애프터마켓 | 🟠 | 주황 | 04:00-08:00 PM |
| 장마감 | 🔴 | 빨강 | 거래 불가 시간 |
| 휴장일 | ⚫ | 회색 | 주말/공휴일 |

### 3.2 신호 통계 카드

```jsx
// SignalStatsCard.jsx

┌─────────────────────┐
│ 📈 상승 신호        │
│                     │
│     23개            │
│  ──────────────     │
│  총 72개 중 32%     │
│                     │
│ A등급: 8개          │
│ B등급: 10개         │
│ C등급: 5개          │
│                     │
│ 평균 확률: 76.3%    │
└─────────────────────┘
```

**표시 정보:**

| 항목 | 설명 |
|------|------|
| 총 신호 수 | 해당 방향 예측 티커 수 |
| 비중 | 전체 대비 비율 |
| 등급별 분포 | A/B/C/D 등급 개수 |
| 평균 확률 | 신호들의 평균 예측 확률 |

### 3.3 Top 기회 카드

```jsx
// TopOpportunitiesCard.jsx

┌─────────────────────┐
│ ⭐ Top 기회 (상승)  │
├─────────────────────┤
│ 1. NVDA    A  82%   │
│    +5.2%   GPU 반도체│
├─────────────────────┤
│ 2. TSLA    A  78%   │
│    +3.1%   전기차   │
├─────────────────────┤
│ 3. AAPL    B  75%   │
│    +1.8%   하드웨어 │
├─────────────────────┤
│   [더보기 →]        │
└─────────────────────┘
```

**Top 기회 선정 기준:**
1. Practicality Grade (A > B > C > D)
2. 예측 확률 (높을수록 상위)
3. Precision (적중률 반영)

### 3.4 AI 인사이트 바

```jsx
// AIInsightBar.jsx

┌─────────────────────────────────────────────────────────────────────┐
│ 💡 AI 인사이트                                                      │
│                                                                     │
│ • 오늘 Technology 섹터에서 12개의 강한 상승 신호가 감지되었습니다.  │
│ • 반도체 산업이 특히 활발합니다 (NVDA, AMD, QCOM).                  │
│ • Healthcare 섹터는 전반적으로 하락 신호가 우세합니다.              │
│                                                                     │
│ [상세 분석 보기 →]                                                  │
└─────────────────────────────────────────────────────────────────────┘
```

**인사이트 생성 규칙:**

| 조건 | 생성 메시지 |
|------|-------------|
| 특정 섹터 신호 집중 | "{섹터}에서 강한 {방향} 신호가 감지되었습니다" |
| 시장 전반 상승 | "시장 전반적으로 상승 분위기입니다" |
| 시장 전반 하락 | "시장 전반적으로 하락 경고가 많습니다" |
| 특정 등급 다수 | "오늘 A등급 기회가 {N}개 있습니다" |
| 변동성 높음 | "변동성이 높은 장세입니다. 리스크 관리에 유의하세요" |

---

## 4. 데이터 요구사항

### 4.1 필요 API 응답

#### GET /api/summary/today

```json
{
  "date": "2025-12-21",
  "market_status": {
    "state": "open",
    "open_time": "09:30:00",
    "close_time": "16:00:00",
    "time_remaining_seconds": 8100,
    "progress_percent": 75
  },
  "signals": {
    "up": {
      "count": 23,
      "percentage": 32,
      "average_probability": 76.3,
      "grade_distribution": {
        "A": 8,
        "B": 10,
        "C": 5,
        "D": 0
      }
    },
    "down": {
      "count": 12,
      "percentage": 17,
      "average_probability": 72.1,
      "grade_distribution": {
        "A": 3,
        "B": 5,
        "C": 4,
        "D": 0
      }
    },
    "neutral": {
      "count": 37,
      "percentage": 51
    }
  },
  "top_opportunities": {
    "up": [
      {
        "ticker": "NVDA",
        "probability": 82,
        "grade": "A",
        "change_percent": 5.2,
        "sector": "technology",
        "industry": "semiconductors"
      },
      {
        "ticker": "TSLA",
        "probability": 78,
        "grade": "A",
        "change_percent": 3.1,
        "sector": "consumer",
        "industry": "automotive"
      }
    ],
    "down": [
      {
        "ticker": "PFE",
        "probability": 76,
        "grade": "B",
        "change_percent": -2.1,
        "sector": "healthcare",
        "industry": "pharma"
      }
    ]
  },
  "insights": [
    {
      "type": "sector_concentration",
      "message": {
        "ko": "Technology 섹터에서 12개의 강한 상승 신호가 감지되었습니다.",
        "en": "12 strong UP signals detected in Technology sector."
      },
      "priority": 1
    },
    {
      "type": "industry_active",
      "message": {
        "ko": "반도체 산업이 특히 활발합니다.",
        "en": "Semiconductor industry is particularly active."
      },
      "priority": 2
    }
  ],
  "last_updated": "2025-12-21T13:45:00Z"
}
```

### 4.2 WebSocket 실시간 업데이트

```json
{
  "type": "summary_update",
  "data": {
    "signals": { ... },
    "top_opportunities": { ... },
    "market_status": { ... }
  },
  "timestamp": "2025-12-21T13:46:00Z"
}
```

---

## 5. 컴포넌트 구조

### 5.1 파일 구조

```
frontend/src/
├── components/
│   ├── summary/
│   │   ├── SummaryPanel.jsx       # 메인 요약 패널
│   │   ├── MarketStatusCard.jsx   # 시장 상태 카드
│   │   ├── SignalStatsCard.jsx    # 신호 통계 카드
│   │   ├── TopOpportunities.jsx   # Top 기회 카드
│   │   ├── AIInsightBar.jsx       # AI 인사이트 바
│   │   └── SummaryProgress.jsx    # 진행률 프로그레스 바
│   └── ...
├── hooks/
│   └── useSummary.js              # 요약 데이터 훅
└── stores/
    └── summaryStore.js            # 요약 상태 관리
```

### 5.2 SummaryPanel.jsx 구조

```jsx
import { useEffect } from 'react'
import { useSummary } from '../hooks/useSummary'
import MarketStatusCard from './MarketStatusCard'
import SignalStatsCard from './SignalStatsCard'
import TopOpportunities from './TopOpportunities'
import AIInsightBar from './AIInsightBar'

export default function SummaryPanel() {
  const { summary, isLoading, refetch } = useSummary()

  // 60초마다 자동 갱신
  useEffect(() => {
    const interval = setInterval(refetch, 60000)
    return () => clearInterval(interval)
  }, [refetch])

  if (isLoading) {
    return <SummarySkeleton />
  }

  return (
    <div className="summary-panel bg-surface rounded-xl p-4 mb-6">
      {/* 헤더 */}
      <div className="flex items-center justify-between mb-4">
        <h2 className="text-lg font-bold flex items-center gap-2">
          📊 오늘의 요약
        </h2>
        <span className="text-sm text-gray-400">
          {summary.date}
        </span>
      </div>

      {/* 메인 카드 그리드 */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
        <MarketStatusCard status={summary.market_status} />
        <SignalStatsCard direction="up" data={summary.signals.up} />
        <SignalStatsCard direction="down" data={summary.signals.down} />
        <TopOpportunities opportunities={summary.top_opportunities} />
      </div>

      {/* AI 인사이트 */}
      <AIInsightBar insights={summary.insights} />
    </div>
  )
}
```

---

## 6. 반응형 디자인

### 6.1 데스크톱 (1024px+)

```
┌──────────┬──────────┬──────────┬──────────┐
│ 시장상태 │ 상승신호 │ 하락신호 │ Top 기회 │
└──────────┴──────────┴──────────┴──────────┘
┌────────────────────────────────────────────┐
│              AI 인사이트                   │
└────────────────────────────────────────────┘
```

### 6.2 태블릿 (768px - 1023px)

```
┌──────────┬──────────┐
│ 시장상태 │ 상승신호 │
├──────────┼──────────┤
│ 하락신호 │ Top 기회 │
└──────────┴──────────┘
┌────────────────────────┐
│      AI 인사이트       │
└────────────────────────┘
```

### 6.3 모바일 (< 768px)

```
┌────────────────────┐
│     시장 상태      │
├────────────────────┤
│ 상승: 23  하락: 12 │
├────────────────────┤
│     Top 기회       │
├────────────────────┤
│   AI 인사이트      │
└────────────────────┘
```

모바일에서는:
- 시장 상태 카드만 전체 표시
- 신호 통계는 간략하게 한 줄 표시
- Top 기회는 슬라이드 형식
- AI 인사이트는 축약 표시 + 펼치기

---

## 7. 접기/펼치기 기능

### 7.1 사용자 경험

- 첫 방문 시 패널 펼침 상태
- 접기 버튼 클릭 시 제목만 표시
- 상태는 localStorage에 저장

```jsx
// 접힌 상태
┌────────────────────────────────────────────┐
│ 📊 오늘의 요약                       [▼]   │
└────────────────────────────────────────────┘

// 펼친 상태
┌────────────────────────────────────────────┐
│ 📊 오늘의 요약                       [▲]   │
├────────────────────────────────────────────┤
│ (전체 내용)                                │
└────────────────────────────────────────────┘
```

---

## 8. 성능 최적화

### 8.1 캐싱 전략

| 데이터 | 캐시 시간 | 갱신 트리거 |
|--------|-----------|-------------|
| 시장 상태 | 30초 | 분 경과, 상태 변경 |
| 신호 통계 | 60초 | 새 예측 도착 |
| Top 기회 | 60초 | 새 예측 도착 |
| AI 인사이트 | 5분 | 수동 갱신 |

### 8.2 로딩 상태

```jsx
// 스켈레톤 로딩
┌────────────────────────────────────────────┐
│ ████████████                               │
├──────────┬──────────┬──────────┬──────────┤
│ ████████ │ ████████ │ ████████ │ ████████ │
│ ██████   │ ██████   │ ██████   │ ██████   │
│ ████     │ ████     │ ████     │ ████     │
└──────────┴──────────┴──────────┴──────────┘
```

---

## 9. 구현 일정

### Phase 1: 기본 구조 (3일)
- [ ] SummaryPanel.jsx 기본 레이아웃
- [ ] MarketStatusCard.jsx 구현
- [ ] useSummary.js 훅 생성

### Phase 2: 신호 통계 (2일)
- [ ] SignalStatsCard.jsx 구현
- [ ] 등급별 분포 차트

### Phase 3: Top 기회 (2일)
- [ ] TopOpportunities.jsx 구현
- [ ] 상세보기 연동

### Phase 4: AI 인사이트 (2일)
- [ ] AIInsightBar.jsx 구현
- [ ] 인사이트 생성 로직 (백엔드)

### Phase 5: 반응형 및 최적화 (2일)
- [ ] 모바일 레이아웃
- [ ] 접기/펼치기 기능
- [ ] 성능 최적화

---

*이 문서는 분석팀장이 작성하였습니다.*
